<div class="home-container">
  <div class="hero">
    <h1>Plataforma E-learning</h1>
    <p>Aprenda, ensine e acompanhe seu progresso em um só lugar.</p>
  </div>

  <div class="card">
    <h2>{{ isEditMode ? 'Editar Curso' : 'Cadastro de Curso' }}</h2>
    <p>Preencha os dados do curso</p>

    @if (isLoading()) {
      <div style="text-align: center; padding: 20px;">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
    } @else {
      <form [formGroup]="form" (ngSubmit)="onSubmit()">

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Título do Curso</mat-label>
            <input matInput formControlName="title" placeholder="Ex: Desenvolvimento Web Completo">
            <mat-error *ngIf="form.get('title')?.hasError('required')">
              Título é obrigatório
            </mat-error>
            <mat-error *ngIf="form.get('title')?.hasError('minlength')">
              Mínimo de 3 caracteres
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descrição</mat-label>
            <textarea
              matInput
              formControlName="description"
              rows="4"
              placeholder="Descreva o conteúdo do curso"></textarea>
            <mat-error *ngIf="form.get('description')?.hasError('required')">
              Descrição é obrigatória
            </mat-error>
            <mat-error *ngIf="form.get('description')?.hasError('minlength')">
              Mínimo de 10 caracteres
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Carga Horária (horas)</mat-label>
            <input matInput type="number" formControlName="workload" placeholder="Ex: 40">
            <mat-error *ngIf="form.get('workload')?.hasError('required')">
              Carga horária é obrigatória
            </mat-error>
            <mat-error *ngIf="form.get('workload')?.hasError('min')">
              Valor mínimo é 1 hora
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>URL da Imagem</mat-label>
            <input matInput formControlName="imageUrl" placeholder="https://...">
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Preço (R$)</mat-label>
            <input matInput type="number" formControlName="price" placeholder="199.90">
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Preço Antigo (R$)</mat-label>
            <input matInput type="number" formControlName="oldPrice" placeholder="299.90">
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Categorias</mat-label>
            <mat-select formControlName="categoryIds" multiple>
              @for (cat of categories(); track cat.id) {
                <mat-option [value]="cat.id">{{ cat.name }}</mat-option>
              }
            </mat-select>
            <mat-error *ngIf="form.get('categoryIds')?.hasError('required')">
              Selecione ao menos uma categoria
            </mat-error>
          </mat-form-field>
        </div>

        <div class="button-group">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="form.invalid || isLoading()">
            {{ isEditMode ? 'Atualizar' : 'Criar Curso' }}
          </button>

          <button
            mat-raised-button
            type="button"
            (click)="cancel()">
            Cancelar
          </button>
        </div>
      </form>
    }
  </div>

  <footer class="footer">© Plataforma E-learning</footer>
</div>
